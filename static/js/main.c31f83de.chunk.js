(this["webpackJsonpflights-app"]=this["webpackJsonpflights-app"]||[]).push([[0],{264:function(e,t,n){},303:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(12),c=n.n(o),r=(n(264),n(23)),s=(n(96),n(100)),l=n(38),u=n(330),p=n(339),j=n(245),h=n.n(j).a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights"}),d=a.a.createContext(),f=n(327),b=n(328),O=n(27),g=n.n(O),m=n(9),x=g.a.icon({iconUrl:"https://e7.pngegg.com/pngimages/115/289/png-clipart-airplane-silhouette-aircraft-drawing-airplane-hand-wikimedia-commons.png",iconSize:[35,40],shadowSize:[0,0],iconAnchor:[0,0],shadowAnchor:[0,0],popupAnchor:[0,0]});var v=function(e){return console.log(e.planeCode),console.log(e.position),Object(m.jsx)(f.a,{position:e.position,icon:x,children:Object(m.jsxs)(b.a,{children:[e.planeCode," "]})})},C=n(329);var y="\n  background-color: ".concat("green",";\n  width: 1rem;\n  height: 1rem;\n  display: block;\n  left: 0rem;\n  top: 0rem;\n  position: relative;\n  border-radius: 1rem 1rem 0;\n  transform: rotate(45deg);\n  border: 1px solid #FFFFFF"),w=g.a.divIcon({className:"",iconAnchor:[0,24],labelAnchor:[-6,0],popupAnchor:[0,-36],html:'<span style="'.concat(y,'" />')}),F="\n  background-color: ".concat("red",";\n  width: 1rem;\n  height: 1rem;\n  display: block;\n  left: 0rem;\n  top: 0rem;\n  position: relative;\n  border-radius: 1rem 1rem 0;\n  transform: rotate(45deg);\n  border: 1px solid #FFFFFF"),S=g.a.divIcon({className:"",iconAnchor:[0,24],labelAnchor:[-6,0],popupAnchor:[0,-36],html:'<span style="'.concat(F,'" />')}),I=function(e){var t="straight"===e.type?"origen "+e.planeCode.toString()+" :"+e.positions[0].toString():null,n="straight"===e.type?"destino "+e.planeCode.toString()+" :"+e.positions[1].toString():null;return Object(m.jsxs)(C.a,{pathOptions:{color:e.color,dashArray:"straight"===e.type?"10,15":"1,0.5",lineJoin:"round",lineCap:"butt"},positions:e.positions,children:[Object(m.jsxs)(b.a,{children:[e.planeCode," "]}),"straight"===e.type?Object(m.jsx)(f.a,{position:e.positions[0],title:t,icon:w}):null,"straight"===e.type?Object(m.jsx)(f.a,{position:e.positions[1],title:n,icon:S}):null]})};var k=function(e){var t=Object(i.useState)({}),n=Object(r.a)(t,2),a=n[0],o=n[1],c=Object(i.useState)([-35,-71]),j=Object(r.a)(c,2),h=j[0],f=j[1],b=Object(i.useState)([]),O=Object(r.a)(b,2),g=O[0],x=O[1],C=Object(i.useContext)(d);return Object(i.useEffect)((function(){return C.on("POSITION",(function(e){!function(e){var t=e.code,n=e.position;0===g.length&&f(n);var i=(a[t]?a[t]:[]).concat([n]);o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(s.a)({},t,i))})),x((function(e){if(e.includes(t))return e;var n=[t];return g.concat(n)}))}(e)})),function(){C.off("POSITION")}}),[C,a]),Object(m.jsxs)(u.a,{center:h,zoom:5,scrollWheelZoom:!1,children:[Object(m.jsxs)("head",{children:[Object(m.jsx)("link",{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.6.0/dist/leaflet.css",integrity:"sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==",crossorigin:""}),Object(m.jsx)("script",{src:"https://unpkg.com/leaflet@1.7.1/dist/leaflet.js",integrity:"sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==",crossorigin:""})]}),Object(m.jsx)(p.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),g.length>0?g.map((function(e,t){return Object(m.jsx)(v,{position:a[e][a[e].length-1],planeCode:e},t)})):null,e.planesInfo.length>0?e.planesInfo.map((function(t,n){return Object(m.jsx)(I,{color:e.pathColors[n],positions:[t.origin,t.destination],type:"straight",planeCode:t.code},n)})):null,Object.keys(a).length>0?Object.keys(a).map((function(e,t){return Object(m.jsx)(I,{color:"black",positions:a[e],type:"curved",planeCode:e},t)})):null]})},A=n(87),E=n.n(A),L=n(148),N=n(149);var T=function(e){var t=Object(i.useState)(new N.ChatController),n=Object(r.a)(t,1)[0];function a(){return(a=Object(L.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,n.addMessage({type:"text",content:t.name+": "+t.message+"\n"+Date(t.date),self:!1});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(i.useEffect)((function(){var t=e.chatList.length-1;!function(e){a.apply(this,arguments)}(e.chatList[t])}),[e.chatList]),Object(i.useMemo)(Object(L.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.setActionRequest({type:"text",always:!0},(function(t){e.handleChatEmitted(t)}));case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),[n,e]),Object(m.jsx)(N.MuiChat,{chatController:n,onSubmit:e.handleChatEmitted})};var M=function(e){return Object(m.jsx)("div",{className:"singlePlainInfo",children:Object(m.jsxs)("ul",{children:[Object(m.jsxs)("li",{children:[" codigo: ",e.code]}),Object(m.jsxs)("li",{children:[" aerolinea: ",e.airline]}),Object(m.jsxs)("li",{children:[" origen: ",e.origin[0],", ",e.origin[1]]}),Object(m.jsxs)("li",{children:[" destino: ",e.destination[0],", ",e.destination[1]]}),Object(m.jsxs)("li",{children:[" avion: ",e.plane]}),Object(m.jsxs)("li",{children:[" asientos: ",e.seats]}),e.passengers.map((function(e,t){return Object(m.jsxs)("p",{children:[" nombre: ",e.name,", edad: ",e.age]})}))]})})},B=n(338),H=n(337),P=n(251),U=n.n(P),z=n(243),D=Object(z.a)((function(e){return{margin:{margin:e.spacing(1)}}}));var G=function(e){var t=D();return Object(m.jsx)("div",{className:t.margin,children:Object(m.jsxs)(H.a,{container:!0,spacing:1,alignItems:"flex-end",children:[Object(m.jsx)(H.a,{item:!0,children:Object(m.jsx)(U.a,{})}),Object(m.jsx)(H.a,{item:!0,children:Object(m.jsx)(B.a,{id:"input-with-icon-grid",label:"Username",onChange:e.handleUsernameChange})})]})})},J=n(334);var Q=function(e){for(var t="0123456789ABCDEF".split(""),n=[],i=0;i<e;i++){for(var a="#",o=0;o<6;o++)a+=t[Math.floor(16*Math.random())];n.push(a)}return n};var X=function(){var e=Object(i.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(0),c=Object(r.a)(o,2),s=c[0],l=c[1],u=Object(i.useState)([]),p=Object(r.a)(u,2),j=p[0],f=p[1],b=Object(i.useState)([]),O=Object(r.a)(b,2),g=O[0],x=O[1],v=Object(i.useState)("Default User"),C=Object(r.a)(v,2),y=C[0],w=C[1];Object(i.useEffect)((function(){var e=Q(s);f(e)}),[s]),Object(i.useEffect)((function(){F()}),[]),Object(i.useEffect)((function(){return h.on("CHAT",(function(e){I(e)})),function(){h.off("CHAT")}}),[g]);var F=function(){return h.emit("FLIGHTS"),h.on("FLIGHTS",(function(e){S(e)})),function(){h.off("FLIGHTS")}},S=function(e){console.log(e),a(e),s!==n.length&&(console.log("cambiando n de aviones"),l(n.length))},I=function(e){x((function(t){return t.concat([e])}))};return Object(m.jsxs)(d.Provider,{value:h,children:[Object(m.jsx)("div",{id:"mapid",children:Object(m.jsx)(k,{planesInfo:n,pathColors:j})}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:"chatContainer",children:[Object(m.jsx)(T,{style:{float:"right",width:"20%"},chatList:g,handleChatEmitted:function(e){var t=e.value,n={name:y,message:t};h.emit("CHAT",n)}}),Object(m.jsx)(G,{handleUsernameChange:function(e){var t=e.target.value;w(t)}})]}),Object(m.jsx)("div",{id:"mapid",style:{float:"left"},children:Object(m.jsx)(k,{planesInfo:n,pathColors:j})})]}),Object(m.jsxs)("div",{className:"planeInfo",style:{float:"left",width:"60%"},children:[Object(m.jsx)(J.a,{variant:"outlined",color:"primary",onClick:F,children:"Get Planes Info!"}),n.length>0?n.map((function(e,t){return Object(m.jsx)(M,{className:"planeInfo",code:e.code,airline:e.airline,origin:e.origin,destination:e.destination,plane:e.plane,seats:e.seats,passengers:e.passengers},t)})):null]})]})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,341)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),o(e),c(e)}))};c.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(X,{})}),document.getElementById("root")),q()},96:function(e,t,n){}},[[303,1,2]]]);
//# sourceMappingURL=main.c31f83de.chunk.js.map